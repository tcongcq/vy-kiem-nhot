function formValidate(a){var b=$("#"+a).validate({highlight:function(a){$(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(a,b){b.parent(".input-group").length?a.insertAfter(b.parent()):a.insertAfter(b)}});return b}function formReset(a){$("#"+a).length>0&&($("#"+a)[0].reset(),$("#"+a+" .form-group").removeClass("has-error"),$("#"+a).validate().resetForm())}function showAppLoading(){$(".app-loading").addClass("open")}function hideAppLoading(){$(".app-loading").removeClass("open")}function tableRefesh(a){var b=[];$(a+" .table-content thead tr:first-child th").each(function(a,c){b.push($(this).width())}),b.pop(),$(a+" .table-header thead tr:first-child th").each(function(a,c){$(this).width(b[a])})}function dropdown(a,b){$("#"+a).hasClass("open")?$("#"+a).removeClass("open"):$("#"+a).addClass("open")}function printDiv(a,b){var c=document.getElementById(a),d=window.open("","Print-Window"),e=c.innerHTML;d.document.open(),d.document.write('<html><body onload="window.print()">'+e+"</body></html>"),d.document.close(),setTimeout(function(){d.close(),b()},3)}Number.prototype.formatMoney=function(a,b,c,d){var e=this,a=isNaN(a=Math.abs(a))?0:a,b=void 0==b?".":b,c=void 0==c?",":c,f=e<0?"-":"",g=parseInt(e=Math.abs(+e||0).toFixed(a))+"",h=(h=g.length)>3?h%3:0,d=void 0==d?"VNĐ":d;return f+(h?g.substr(0,h)+c:"")+g.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+c)+(a?b+Math.abs(e-g).toFixed(a).slice(2):"")+" "+d},String.prototype.str_pad=function(a,b,c){"undefined"===b&&(b=" "),"undefined"===c&&(c="STR_PAD_RIGHT");var d=this+"";switch(c){case"STR_PAD_RIGHT":for(;d.length<a;)d+=b;break;case"STR_PAD_LEFT":for(;d.length<a;)d=b+d;break;case"STR_PAD_BOTH":for(;d.length<a;)d+=b,d.length<a&&(d=b+d)}return d},String.prototype.strtotime=function(a){var b=new Date(this);if("Invalid Date"===b.toString())return this;for(var c=a.length,d="",e=0;e<c;e++)switch(a[e]){case"Y":d+=b.getFullYear();break;case"m":d+=String(b.getMonth()+1).str_pad(2,"0","STR_PAD_LEFT");break;case"d":d+=String(b.getDate()).str_pad(2,"0","STR_PAD_LEFT");break;case"H":d+=String(b.getHours()).str_pad(2,"0","STR_PAD_LEFT");break;case"i":d+=String(b.getMinutes()).str_pad(2,"0","STR_PAD_LEFT");break;case"s":d+=String(b.getSeconds()).str_pad(2,"0","STR_PAD_LEFT");break;default:d+=a[e]}return d},String.prototype.latinise=function(){var a=this;return a=a.replace(/å|ä|ā|à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ|ä|ą/g,"a"),a=a.replace(/ß|ḃ/g,"b"),a=a.replace(/ç|ć|č|ĉ|ċ|¢|©/g,"c"),a=a.replace(/đ|ď|ḋ|đ/g,"d"),a=a.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ|ę|ë|ě|ė/g,"e"),a=a.replace(/ḟ|ƒ/g,"f"),a=a.replace(/ķ/g,"k"),a=a.replace(/ħ|ĥ/g,"h"),a=a.replace(/ì|í|î|ị|ỉ|ĩ|ï|î|ī|¡|į/g,"i"),a=a.replace(/ĵ/g,"j"),a=a.replace(/ṁ/g,"m"),a=a.replace(/ö|ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ|ö|ø|ō/g,"o"),a=a.replace(/ṗ/g,"p"),a=a.replace(/ġ|ģ|ğ|ĝ/g,"g"),a=a.replace(/ü|ù|ú|ū|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ|ü|ų|ů/g,"u"),a=a.replace(/ỳ|ý|ỵ|ỷ|ỹ|ÿ/g,"y"),a=a.replace(/ń|ñ|ň|ņ/g,"n"),a=a.replace(/ŝ|š|ś|ṡ|ș|ş|³/g,"s"),a=a.replace(/ř|ŗ|ŕ/g,"r"),a=a.replace(/ṫ|ť|ț|ŧ|ţ/g,"t"),a=a.replace(/ź|ż|ž/g,"z"),a=a.replace(/ł|ĺ|ļ|ľ/g,"l"),a=a.replace(/ẃ|ẅ/g,"w"),a=a.replace(/æ/g,"ae"),a=a.replace(/þ/g,"th"),a=a.replace(/ð/g,"dh"),a=a.replace(/£/g,"pound"),a=a.replace(/¥/g,"yen"),a=a.replace(/ª/g,"2"),a=a.replace(/º/g,"0"),a=a.replace(/¿/g,"?"),a=a.replace(/µ/g,"mu"),a=a.replace(/®/g,"r"),a=a.replace(/Ä|À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ|Ą|Å|Ā/g,"A"),a=a.replace(/Ḃ|B/g,"B"),a=a.replace(/Ç|Ć|Ċ|Ĉ|Č/g,"C"),a=a.replace(/Đ|Ď|Ḋ/g,"D"),a=a.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ|Ę|Ë|Ě|Ė|Ē/g,"E"),a=a.replace(/Ḟ|Ƒ/g,"F"),a=a.replace(/Ì|Í|Ị|Ỉ|Ĩ|Ï|Į/g,"I"),a=a.replace(/Ĵ|J/g,"J"),a=a.replace(/Ö|Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ|Ø/g,"O"),a=a.replace(/Ü|Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ|Ū|Ų|Ů/g,"U"),a=a.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ|Ÿ/g,"Y"),a=a.replace(/Ł/g,"L"),a=a.replace(/Þ/g,"Th"),a=a.replace(/Ṁ/g,"M"),a=a.replace(/Ń|Ñ|Ň|Ņ/g,"N"),a=a.replace(/Ś|Š|Ŝ|Ṡ|Ș|Ş/g,"S"),a=a.replace(/Æ/g,"AE"),a=a.replace(/Ź|Ż|Ž/g,"Z"),a=a.replace(/Ř|R|Ŗ/g,"R"),a=a.replace(/Ț|Ţ|T|Ť/g,"T"),a=a.replace(/Ķ|K/g,"K"),a=a.replace(/Ĺ|Ł|Ļ|Ľ/g,"L"),a=a.replace(/Ħ|Ĥ/g,"H"),a=a.replace(/Ṗ|P/g,"P"),a=a.replace(/Ẁ|Ŵ|Ẃ|Ẅ/g,"W"),a=a.replace(/Ģ|G|Ğ|Ĝ|Ġ/g,"G"),a=a.replace(/Ŧ|Ṫ/g,"T")},ko.components.register("form-signin",{viewModel:function(a){var b=this;b.params=a,b.notify=ko.observable(""),b.expired=ko.observable(!1);var c;b.signin=function(){return void 0===a.captcha?($("#form-signin .btn").prop("disabled",!0),$.post("login",$("#form-signin").serialize()).done(function(a){$("#form-signin .btn").prop("disabled",!1),"success"===a.status?window.location.reload():b.notify('<div class="alert alert-danger" role="alert">'+a.message+"</div>")})):(b.expired(!0),c=grecaptcha.render(a.captcha.id,{sitekey:a.captcha.sitekey,theme:a.captcha.theme,type:a.captcha.type,size:a.captcha.size,tabindex:a.captcha.tabindex,"expired-callback":function(){b.expired(!1)},callback:function(){$.post("login",$("#form-signin").serialize()+"&responseCaptcha="+grecaptcha.getResponse(c)).done(function(a){$("#form-signin .btn").prop("disabled",!1),"success"===a.status?window.location.reload():(b.expired(!1),b.notify('<div class="alert alert-danger" role="alert">'+a.message+"</div>"))})}})),!1},$("#form-signin .form-control").on("keyup",function(){b.notify("")})},template:'<div class="container">        <div class="panel panel-default panel-signin">            <div class="panel-body">                <form data-bind="submit: signin" class="form-signin" id="form-signin" method="POST">                    <input type="hidden" name="_token" data-bind="value: params.token">                    <img data-bind="attr:{src: params.logo}" class="img-responsive" style="margin: 5px auto 20px auto;"/>                    <div data-bind="html: notify"></div>                    <div data-bind="visible: !expired()">                        <input type="text" id="username" name="username" class="form-control" data-bind="attr:{placeholder: params.labels.username}" required autofocus>                        <input type="password" id="password" name="password" class="form-control" data-bind="attr:{placeholder: params.labels.password}" required>                        <div class="checkbox">                            <label>                                <input type="checkbox" name="remember-me" value="true"> <span data-bind="html: params.labels.remember_me"></span>                            </label>                        </div>                        <button data-bind="attr:{class: \'btn btn-lg btn-block btn-\' + params.type}, html: params.labels.login" type="submit"></button>                    </div>                    <div data-bind="if: expired()">                        <div style="margin-top: 40px;" data-bind="css: params.captcha.class, attr: { id: params.captcha.id }"></div>                    </div>                </form>            </div>        </div>    </div>'}),ko.components.register("grid",{viewModel:function(a){var b=this;b.uigrid=Math.random().toString(36).substring(7),b.params=a,b.token=void 0===a.token?"":a.token,b.url=void 0===a.url?"":a.url,b.hidetoolbar=ko.observable(void 0!==a.hidetoolbar&&a.hidetoolbar),b.labels=$.map(a.cols,function(a,b){return a}),b.lang={vi:{data_empty_label:"Không có dữ liệu",add:"Thêm",refresh:"Làm mới",delete:"Xoá",pagination_of_total:"trong tổng số",search:"Tìm kiếm",delete_question:"Bạn chắc chắn muốn xoá dữ liệu này?",cancel:"Huỷ"},en:{data_empty_label:"Data empty",add:"Add",refresh:"Refresh",delete:"Delete",pagination_of_total:"of",search:"Search",delete_question:"Are you sure you want to delete this data?",cancel:"Cancel"}},b.trans=b.lang.en,void 0!==a.lang&&void 0!==b.lang[a.lang]&&$.extend(b.trans,b.lang[a.lang]),void 0!==a.trans&&$.extend(b.trans,a.trans),void 0===a.cellsrenderer&&(a.cellsrenderer={}),void 0===a.cellstemplaterenderer&&(a.cellstemplaterenderer={}),b.buttons=void 0===a.buttons?[]:a.buttons,b.cols=$.map(a.cols,function(a,b){return b}),b.sizes=[5,10,25,50,100,200,500],b.total=ko.observable(0),b.rows=ko.observableArray([]),b.ids=ko.observableArray([]),b.pagenum=1,b.pagesize=25,b.search=ko.observable(""),b.sorts=void 0===a.sorts?[]:a.sorts,b.sortdatafield="",b.sortorder=ko.observable(0),b.groupby=ko.observable(void 0===a.groupby?"":a.groupby),b.filters=ko.observableArray([]),b.loading=ko.observable(!1),b.is_fetch=!1,b.pagemax=ko.observable(Math.max(Math.ceil(b.total()/b.pagesize),1)),b.computed_pagenum=ko.observable(b.pagenum),b.computed_pagesize=ko.observable(b.pagesize),b.localdata=ko.observableArray([]),b.is_localdata=void 0!==a.localdata&&a.localdata,b.setPageNum=function(a){b.pagenum=a,b.computed_pagenum(a)},b.setPageSize=function(a){b.pagesize=a,b.computed_pagesize(a),b.pagemax(Math.max(Math.ceil(b.total()/a),1))},b.setSize=function(a){b.pagesize!==a&&(b.setPageNum(1),b.setPageSize(a),b.fetch())},b.start=ko.pureComputed(function(){return b.computed_pagesize()*(b.computed_pagenum()-1)+1}),b.end=ko.pureComputed(function(){return Math.min(b.computed_pagesize()*b.computed_pagenum(),b.total())}),b.next=function(){b.setPageNum(b.pagenum+1),b.fetch()},b.prev=function(){b.setPageNum(b.pagenum-1),b.fetch()},b.del=function(){$("#"+b.uigrid+" #cfmDel").modal("show")},b.sort=function(a){b.sortdatafield=a;var c=b.sortorder()+1;c>1&&(c=-1),0==c&&(b.sortdatafield=""),b.sortorder(c)},b.toogleAll=function(){if(b.checkAll())b.ids([]);else if(""===b.groupby()){var a=[];ko.utils.arrayForEach(b.rows(),function(b){a.push(b.id)}),b.ids(a)}else{var a=[];ko.utils.arrayForEach(b.rows(),function(b){ko.utils.arrayForEach(b.rows,function(b){a.push(b.id)})}),b.ids(a)}return!0},b.checkAll=ko.pureComputed(function(){if(""===b.groupby())return b.ids().length===b.rows().length;var a=0;return ko.utils.arrayForEach(b.rows(),function(b){a+=b.total}),b.ids().length===a},b),b.showLoading=function(){b.loading(!0)},b.hideLoading=function(){b.loading(!1)},b.doSearch=function(a,c){return!!b.is_fetch||void b.search($(c.target).val())},b.clearSearch=function(a,c){$(c.target).parent().children("input").val(""),b.search("")},b.search.subscribe(function(a){b.setPageNum(1)},b,"beforeChange"),b.filters.subscribe(function(a){b.setPageNum(1)},b,"beforeChange"),b.groupby.subscribe(function(a){b.setPageNum(1),b.rows([])},b,"beforeChange"),b.fetch=function(){b.is_localdata?(b.localdata_handle(),tableRefesh("#"+b.uigrid+" #app-grid")):(b.is_fetch=!0,$.ajax({url:b.url,type:"post",data:{_token:b.token,pagenum:b.pagenum,pagesize:b.pagesize,search:b.search,sort:b.sortdatafield,order:b.sortorder,groupby:b.groupby,filters:b.filters()},beforeSend:b.showLoading,complete:b.hideLoading,success:function(a){b.rows(a.rows),b.total(a.total),b.is_fetch=!1,tableRefesh("#"+b.uigrid+" #app-grid")}}))},b.add=function(){void 0!==a.add&&a.add()},b.edit=function(b){void 0!==a.edit&&a.edit(b)},b.ref=function(){return!!b.is_fetch||void b.fetch()},b.doDel=function(){b.is_localdata?(b.deleteData(b.ids()),b.ids([])):$.ajax({url:b.url+"/delete",type:"post",data:{_token:b.token,ids:JSON.stringify(b.ids())},beforeSend:showAppLoading,complete:hideAppLoading,success:function(a){toastr[a.status](a.message),"success"===a.status&&(b.ids([]),b.fetch())}})},b.compare=function(a,b,c){switch(b){case"<":return a<c;case"<=":return a<=c;case"==":return a==c;case"!=":return a!=c;case">":return a>c;case">=":return a>=c}return!1},b.localdata_handle=function(){b.showLoading();var a=[];b.rows([]),$.each(b.localdata(),function(b,c){a.push(c)}),""!=b.search()&&(a=ko.utils.arrayFilter(a,function(a){var c=!1;return $.each(b.cols,function(d,e){c=c||String(a[e]).latinise().toLowerCase().indexOf(String(b.search()).latinise().toLowerCase())!==-1}),c})),b.filters().length&&(a=ko.utils.arrayFilter(a,function(a){var c=!0;return $.each(b.filters(),function(d,e){void 0!==e.operator?Array.isArray(e.operator)?$.each(e.operator,function(d,f){c=c&&b.compare(a[e.key],e.operator[d],e.value[d])}):c=c&&b.compare(a[e.key],e.operator,e.value):c=c&&e.value.indexOf(a[e.key])>=0}),c})),0!=b.sortorder()&&a.sort(function(a,c){return b.sortorder()==-1?a[b.sortdatafield]<c[b.sortdatafield]:a[b.sortdatafield]>c[b.sortdatafield]}),b.total(a.length);for(var c=[],d=(b.pagenum-1)*b.pagesize;d<b.pagenum*b.pagesize&&d<b.total();d++)c.push(a[d]);if(""!=b.groupby()){var e=[];$.each(c,function(a,c){e.indexOf(c[b.groupby()])==-1&&e.push(c[b.groupby()])}),e.sort();var f=[];$.each(e,function(a,d){var e=ko.utils.arrayFilter(c,function(a){return a[b.groupby()]==d});f.push({name:d,rows:e,total:e.length})}),c=f}b.rows(c),b.pagemax(Math.max(Math.ceil(b.total()/b.pagesize),1)),b.hideLoading()},b.pushData=function(a){var c=Math.random().toString(36).substring(2),d={id:c,idx:c,is_new_data:!0};void 0!==a.id&&$.extend(d,{is_new_data:!1}),b.localdata.push($.extend(d,a))},b.updateData=function(a){$.each(b.localdata(),function(b,c){if(c.id==a.id)return $.extend(c,a),!0}),b.fetch()},b.deleteData=function(a){b.localdata.remove(function(b){return a.indexOf(b.id)>=0})},b.setLocalData=function(a){b.localdata(a)},b.getLocalData=function(){return b.localdata()},ko.computed(b.fetch),b.init=function(){void 0==a.height?($("#"+b.uigrid+" #app-grid .wrap-scroll").css("height",$(window).height()-135),$(window).resize(function(){$("#"+b.uigrid+" #app-grid .wrap-scroll").css("height",$(window).height()-135),tableRefesh("#"+b.uigrid+" #app-grid")})):($("#"+b.uigrid+" #app-grid .wrap-scroll").css("height",a.height),$(window).resize(function(){$("#"+b.uigrid+" #app-grid .wrap-scroll").css("height",a.height),tableRefesh("#"+b.uigrid+" #app-grid")})),void 0!==a.callback&&a.callback(b)}},template:'    <div data-bind="attr:{id: uigrid, uigrid: uigrid}">        <!--ko if: hidetoolbar()==false-->        <nav class="navbar navbar-default">            <div class="container-fluid">                <div class="app-toolbar">                    <div class="pull-left">                        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">                            <!-- ko if: buttons.indexOf("add") !== -1 -->                                <button data-bind="click: add" type="button" class="btn btn-default" ><span class="glyphicon glyphicon-plus"></span> <span data-bind="html: trans.add"></span></button>                            <!--/ko-->                            <button data-bind="click: ref, attr:{title: trans.refresh}" type="button" class="btn btn-default" data-toggle="tooltip"><span class="glyphicon glyphicon-refresh"></span></button>                            <!-- ko if: buttons.indexOf("delete") !== -1 -->                            <button data-bind="click: del, visible: ids().length>0, attr:{title: trans.delete}" type="button" class="btn btn-danger" data-toggle="tooltip"><span class="glyphicon glyphicon-trash"></span></button>                            <!--/ko-->                            <!-- ko if: params.leftToolbar !== undefined -->                                <div class="pull-left" data-bind="template: {name: params.leftToolbar }"></div>                            <!-- /ko -->                        </div>                    </div>                    <div class="pull-right">                        <div class="pagination" style="float:left;" data-bind="visible: total() > 0">                            <span><b data-bind="html: start"></b>-<b data-bind="html: end"></b> <span data-bind="html: trans.pagination_of_total"></span> <b data-bind="html: total"></b></span>                            <div class="btn-group" role="group">                                <button type="button" class="btn btn-default" data-bind="click: prev, enable: computed_pagenum()>1"><span class="glyphicon glyphicon-chevron-left"></span></button>                                <button type="button" class="btn btn-default" data-bind="click: next, enable: computed_pagenum()<pagemax()"><span class="glyphicon glyphicon-chevron-right"></span></button>                            </div>                            <div class="btn-group" style="margin-right: 5px;">                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">                                    <span data-bind="text: computed_pagesize"></span>                                    <span class="caret"></span>                                </button>                                <ul class="dropdown-menu">                                    <!--ko foreach: sizes-->                                        <!-- ko if: $parent.sizes[$index() -1 ] <= $parent.total() || $index()==0 -->                                        <li data-bind="click: $parent.setSize, attr: {class: $parent.computed_pagesize() === $data ? \'active\':\'\'}"><a data-bind="text: $data"></a></li>                                        <!--/ko-->                                    <!--/ko-->                                </ul>                            </div>                        </div>                        <div id="search-wrap" style="float:right;">                            <input type="text" class="form-control" data-bind="attr: {placeholder: trans.search}, event: {keyup: doSearch} ">                            <i id="search-clear" class="glyphicon glyphicon-remove" data-bind="click: clearSearch, attr: {\'data-toggle\': search()!=\'\'}"></i>                        </div>                    </div>                </div>            </div>        </nav>        <!--/ko-->        <div class="table-header-fixed-top" id="app-grid" >            <div class="loading" data-bind="attr: {class: loading() ? \'loading open\' : \'loading\'}"><span class="glyphicon glyphicon-refresh glyphicon-spin"></span></div>            <table class="table table-header">                <thead>                    <tr>                        <th width="30px"><input type="checkbox" data-bind="click: toogleAll,checked: checkAll"/></th>                        <!--ko foreach: {data: labels, as: \'labels\' }-->                             <!--ko if: $parent.groupby()===\'\' || $parent.cols[$index()] !== $parent.groupby() -->                                <!--ko if: $parent.sorts.indexOf($parent.cols[$index()]) < 0 -->                                     <th><span data-bind="html: $data"></span></th>                                <!--/ko-->                                <!--ko if: $parent.sorts.indexOf($parent.cols[$index()]) >= 0 -->                                     <th class="sortdatafield" data-bind="click: $parent.sort.bind($data, $parent.cols[$index()])"><span data-bind="html: $data"></span> <span data-bind="attr: {class: $parent.sortorder() != 0 && $parent.sortdatafield==$parent.cols[$index()] ? ($parent.sortorder()==1 ? \'sortasc\':\'sortdesc\'):\'sort\'}"></span></th>                                <!--/ko-->                            <!--/ko-->                        <!--/ko-->                        <th></th>                    </tr>                 </thead>            </table>            <div class="grid-container loading-container wrap-scroll">                <table class="table table-hover table-content table-striped thead-hide">                    <thead>                        <tr>                            <th width="30px"><input type="checkbox" data-bind="click: toogleAll,checked: ids().length===rows().length"/></th>                            <!--ko foreach: {data: labels, as: \'labels\' }-->                                 <!--ko if: $parent.groupby()===\'\' || $parent.cols[$index()] !== $parent.groupby() -->                                    <!--ko if: $parent.sorts.indexOf($parent.cols[$index()]) < 0 -->                                         <th data-bind="attr: {style: $parent.params.columnsresize!==undefined &&  $parent.params.columnsresize[$parent.cols[$index()]] !== undefined ? \'width:\'+$parent.params.columnsresize[$parent.cols[$index()]]+\'px;\':\'\'}"><span data-bind="html: $data"></span></th>                                    <!--/ko-->                                    <!--ko if: $parent.sorts.indexOf($parent.cols[$index()]) >= 0 -->                                         <th data-bind="attr: {style: $parent.params.columnsresize!==undefined &&  $parent.params.columnsresize[$parent.cols[$index()]] !== undefined ? \'width:\'+$parent.params.columnsresize[$parent.cols[$index()]]+\'px;\':\'\'}" class="sortdatafield" data-bind="click: $parent.sort.bind($data, $parent.cols[$index()])"><span data-bind="html: $data"></span> <span data-bind="attr: {class: $parent.sortorder() != 0 && $parent.sortdatafield==$parent.cols[$index()] ? ($parent.sortorder()==1 ? \'sortasc\':\'sortdesc\'):\'sort\'}"></span></th>                                    <!--/ko-->                                <!--/ko-->                            <!--/ko-->                            <th></th>                        </tr>                    </thead>                    <tbody>                        <!--ko if: groupby()===\'\'-->                            <!--ko foreach: {data: rows, as: \'row\'}-->                                <tr data-bind="attr: {\'class\': $parent.ids().indexOf(id)>=0 ? \'active\':\'\'}">                                    <td>                                        <input type="checkbox" data-bind="checkedValue: id,checked: $parent.ids"/>                                    </td>                                   <!--ko foreach: $parent.cols-->                                   <td>                                        <!-- ko if: $parents[1].params.cellsrenderer[$data] === undefined && $parents[1].params.cellstemplaterenderer[$data] === undefined -->                                        <span data-bind="html: row[$data]"></span>                                        <!-- /ko -->                                        <!-- ko if: $parents[1].params.cellsrenderer[$data] !== undefined -->                                        <span data-bind="html: $parents[1].params.cellsrenderer[$data](row)"></span>                                        <!-- /ko -->                                        <!-- ko if: $parents[1].params.cellstemplaterenderer[$data] !== undefined -->                                        <div data-bind="template: {name: $parents[1].params.cellstemplaterenderer[$data], data: row}"></div>                                        <!-- /ko -->                                   </td>                                   <!--/ko-->                                   <td class="text-right actions">                                        <!-- ko if: $parent.buttons.indexOf("edit") !== -1 -->                                            <!-- ko if: $parent.params.editToolbar !== undefined -->                                                <div data-bind="template: {name: $parent.params.editToolbar }"></div>                                            <!-- /ko -->                                            <!-- ko if: $parent.params.editToolbar === undefined -->                                                <button class="btn btn-default btn-sm" data-bind="click: $parent.edit"><span class="glyphicon glyphicon-edit"></span></button>                                            <!-- /ko -->                                        <!--/ko-->                                    </td>                                </tr>                            <!--/ko-->                        <!--/ko-->                        <!--ko if: groupby()!==\'\'-->                            <!--ko foreach: {data: rows, as: \'row\'}-->                                <!--ko if: row.rows!==undefined-->                                    <tr class="group-header">                                        <td data-bind="attr:{colspan: $parent.cols.length + ($parent.cols.indexOf($parent.groupby()) < 0 ? 2:1) }">                                            <!-- ko if: $parent.params.cellsrenderer[$parent.groupby()] === undefined -->                                            <span data-bind="html: row[$parent.groupby()]"></span> (<span data-bind="html: row.total"></span>)                                            <!-- /ko -->                                            <!-- ko if: $parent.params.cellsrenderer[$parent.groupby()] !== undefined -->                                            <div data-bind="html: $parent.params.cellsrenderer[$parent.groupby()](row)"></div>                                            <!-- /ko -->                                        </td>                                    </tr>                                    <!--ko foreach: {data: row.rows, as: \'row_group\'}-->                                        <tr data-bind="attr: {\'class\': $parents[1].ids().indexOf(row_group.id)>=0 ? \'active\':\'\'}">                                            <td>                                                <input type="checkbox" data-bind="checkedValue: row_group.id,checked: $parents[1].ids"/>                                            </td>                                           <!--ko foreach: $parents[1].cols-->                                                <!--ko if: $parents[2].cols[$index()] !== $parents[2].groupby() -->                                                    <td>                                                        <!-- ko if: $parents[2].params.cellsrenderer[$data] === undefined && $parents[2].params.cellstemplaterenderer[$data] === undefined -->                                                        <span data-bind="html: row_group[$data]"></span>                                                        <!-- /ko -->                                                        <!-- ko if: $parents[2].params.cellsrenderer[$data] !== undefined -->                                                        <span data-bind="html: $parents[2].params.cellsrenderer[$data](row_group)"></span>                                                        <!-- /ko -->                                                        <!-- ko if: $parents[2].params.cellstemplaterenderer[$data] !== undefined -->                                                        <div data-bind="template: {name: $parents[2].params.cellstemplaterenderer[$data], data: row_group}"></div>                                                        <!-- /ko -->                                                    </td>                                                <!--/ko-->                                           <!--/ko-->                                            <td class="text-right actions">                                                <!-- ko if: $parents[1].buttons.indexOf("edit") !== -1 -->                                                    <!-- ko if: $parents[1].params.editToolbar !== undefined -->                                                        <div data-bind="template: {name: $parents[1].params.editToolbar }"></div>                                                    <!-- /ko -->                                                    <!-- ko if: $parents[1].params.editToolbar === undefined -->                                                        <button class="btn btn-default btn-sm" data-bind="click: $parents[1].edit"><span class="glyphicon glyphicon-edit"></span></button>                                                    <!-- /ko -->                                                <!--/ko-->                                            </td>                                        </tr>                                    <!--/ko-->                                <!--/ko-->                            <!--/ko-->                        <!--/ko-->                        <tr data-bind="visible: rows().length==0 " style="display: none;">                            <td data-bind="attr: {colspan: cols.length + 2}, html: trans.data_empty_label" class="text-center active"></td>                        </tr>                    </tbody>               </table>            </div>        </div>        <!-- ko if: buttons.indexOf("delete") !== -1 -->        <!--cfmDel-->        <div class="modal" id="cfmDel" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="cfmDel" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-content modal-delete">                    <div class="modal-body">                        <h3 data-bind="html: trans.delete_question"></h3><br>                        <button class="btn btn-default" data-dismiss="modal" data-bind="html: trans.cancel"></button>                        <button class="btn btn-danger" data-dismiss="modal" data-bind="click: doDel, html: trans.delete"></button>                    </div>                </div>            </div>        </div>        <!-- /ko -->    </div>    <span data-bind="template: { afterRender: init }"></span>'}),ko.components.register("edit-form",{viewModel:function(a){var b=this;b.params=a,b.frmToolbar={btnBack:!0,btnCancel:!0,btnSaveAndBack:!0,btnSaveAndNew:!0},void 0!=a.toolbar&&(b.frmToolbar=$.extend(b.frmToolbar,a.toolbar)),b.frmToolbar=ko.mapping.fromJS(b.frmToolbar),b.current=ko.observable({}),b.method=ko.observable("add"),b.save=function(c){return!!$("#frm-edit").valid()&&(void 0!==a.prepare_save&&a.prepare_save(),b.current()._token=a.token,void $.ajax({url:a.url+"/"+b.method(),type:"post",data:b.current(),beforeSend:showAppLoading,complete:hideAppLoading,success:function(a){toastr[a.status](a.message),"success"==a.status&&(void 0!==c&&c(),void 0!==b.params.saved&&b.params.saved())}}))},b.saveAndNew=function(){b.save(function(){b.reset(),b.method("add")})},b.saveAndBack=function(){b.save(function(){b.back()})},b.back=function(){b.reset(),a.back()},b.reset=function(){b.current({}),formReset("frm-edit")},b.form_rendered=function(){void 0!==jQuery().tooltip&&$('[data-toggle="tooltip"]').tooltip({placement:"bottom"}),void 0!==jQuery().popover&&$('[data-toggle="popover"]').popover({html:!0}),void 0!==a.callback&&a.callback(b),formValidate("frm-edit")}},template:'        <nav class="navbar navbar-default">            <div class="container-fluid">                <div class="app-toolbar">                    <!-- ko if: frmToolbar.btnBack()==true -->                    <div class="pull-left">                        <button data-bind="click: back" type="button" class="btn btn-default"><span class="glyphicon glyphicon-chevron-left"></span> Quay lại</button>                    </div>                    <!-- /ko -->                    <!-- ko if: params.leftToolbar !== undefined -->                        <div class="pull-left" data-bind="template: {name: params.leftToolbar }"></div>                    <!-- /ko -->                    <!-- ko if: params.rightToolbar !== undefined -->                        <div class="pull-right" data-bind="template: {name: params.rightToolbar }"></div>                    <!-- /ko -->                    <div class="pull-right">                        <!-- ko if: frmToolbar.btnCancel()==true -->                        <button data-bind="click: reset" type="button" class="btn btn-default"><span class="glyphicon glyphicon-refresh"></span> Huỷ</button>                        <!-- /ko -->                        <!-- ko if: frmToolbar.btnSaveAndBack()==true -->                        <button data-bind="click: saveAndBack" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-floppy-disk"></span> <span data-bind="html: method()==\'add\' ? \'Lưu\':\'Cập nhật\'"></span> & Thoát</button>                        <!-- /ko -->                        <!-- ko if: frmToolbar.btnSaveAndNew()==true -->                        <button data-bind="click: saveAndNew" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-floppy-disk"></span> <span data-bind="html: method()==\'add\' ? \'Lưu\':\'Cập nhật\'"></span> & Thêm mới</button>                        <!-- /ko -->                    </div>                </div>            </div>        </nav>        <form id="frm-edit" style="padding: 15px;">            <div data-bind="template: {name: params.template, afterRender: form_rendered }"></div>        </form>'
}),ko.bindingHandlers.hotkeys={init:function(a,b,c,d,e){$.each(b(),function(b,c){$(a).on("keydown",null,c.key,function(){return c.action(),!1})})},update:function(a,b,c,d,e){}};