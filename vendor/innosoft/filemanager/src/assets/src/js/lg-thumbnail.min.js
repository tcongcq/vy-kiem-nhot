
(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.LgThumbnail=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){(function(j,h){if(typeof d==="function"&&d.amd){d([],h)}else{if(typeof e!=="undefined"){h()}else{var i={exports:{}};h();j.lgThumbnail=i.exports}}})(this,function(){var i=Object.assign||function(n){for(var l=1;l<arguments.length;l++){var m=arguments[l];for(var k in m){if(Object.prototype.hasOwnProperty.call(m,k)){n[k]=m[k]}}}return n};var h={thumbnail:true,animateThumb:true,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:false,showThumbByDefault:true,toggleThumb:true,pullCaptionUp:true,enableThumbDrag:true,enableThumbSwipe:true,swipeThreshold:50,loadYoutubeThumbnail:true,youtubeThumbSize:1,loadVimeoThumbnail:true,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:true};var j=function j(k){this.el=k;this.core=window.lgData[this.el.getAttribute("lg-uid")];this.core.s=i({},h,this.core.s);this.thumbOuter=null;this.thumbOuterWidth=0;this.thumbTotalWidth=this.core.items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin);this.thumbIndex=this.core.index;this.left=0;this.init();return this};j.prototype.init=function(){var k=this;if(this.core.s.thumbnail&&this.core.items.length>1){if(this.core.s.showThumbByDefault){setTimeout(function(){utils.addClass(k.core.outer,"lg-thumb-open")},700)}if(this.core.s.pullCaptionUp){utils.addClass(this.core.outer,"lg-pull-caption-up")}this.build();if(this.core.s.animateThumb){if(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()){this.enableThumbDrag()}if(this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()){this.enableThumbSwipe()}this.thumbClickable=false}else{this.thumbClickable=true}this.toggle();this.thumbkeyPress()}};j.prototype.build=function(){var s=this;var u="";var p="";var v;var r='<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>';switch(this.core.s.vimeoThumbSize){case"thumbnail_large":p="640";break;case"thumbnail_medium":p="200x150";break;case"thumbnail_small":p="100x75"}utils.addClass(s.core.outer,"lg-has-thumb");s.core.outer.querySelector(".lg").insertAdjacentHTML("beforeend",r);s.thumbOuter=s.core.outer.querySelector(".lg-thumb-outer");s.thumbOuterWidth=s.thumbOuter.offsetWidth;if(s.core.s.animateThumb){s.core.outer.querySelector(".lg-thumb").style.width=s.thumbTotalWidth+"px";s.core.outer.querySelector(".lg-thumb").style.position="relative"}if(this.core.s.animateThumb){s.thumbOuter.style.height=s.core.s.thumbContHeight+"px"}function t(z,k,n){var x=s.core.isVideo(z,n)||{};var y;var w="";if(x.youtube||x.vimeo||x.dailymotion){if(x.youtube){if(s.core.s.loadYoutubeThumbnail){y="//img.youtube.com/vi/"+x.youtube[1]+"/"+s.core.s.youtubeThumbSize+".jpg"}else{y=k}}else{if(x.vimeo){if(s.core.s.loadVimeoThumbnail){y="//i.vimeocdn.com/video/error_"+p+".jpg";w=x.vimeo[1]}else{y=k}}else{if(x.dailymotion){if(s.core.s.loadDailymotionThumbnail){y="//www.dailymotion.com/thumbnail/video/"+x.dailymotion[1]}else{y=k}}}}}else{y=k}u+='<div data-vimeo-id="'+w+'" class="lg-thumb-item" style="width:'+s.core.s.thumbWidth+"px; margin-right: "+s.core.s.thumbMargin+'px"><img src="'+y+'" /></div>';w=""}if(s.core.s.dynamic){for(var o=0;o<s.core.s.dynamicEl.length;o++){t(s.core.s.dynamicEl[o].src,s.core.s.dynamicEl[o].thumb,o)}}else{for(var q=0;q<s.core.items.length;q++){if(!s.core.s.exThumbImage){t(s.core.items[q].getAttribute("href")||s.core.items[q].getAttribute("data-src"),s.core.items[q].querySelector("img").getAttribute("src"),q)}else{t(s.core.items[q].getAttribute("href")||s.core.items[q].getAttribute("data-src"),s.core.items[q].getAttribute(s.core.s.exThumbImage),q)}}}s.core.outer.querySelector(".lg-thumb").innerHTML=u;v=s.core.outer.querySelectorAll(".lg-thumb-item");for(var l=0;l<v.length;l++){(function(n){var x=v[n];var w=x.getAttribute("data-vimeo-id");if(w){window["lgJsonP"+s.el.getAttribute("lg-uid")+""+l]=function(y){x.querySelector("img").setAttribute("src",y[0][s.core.s.vimeoThumbSize])};var k=document.createElement("script");k.className="lg-script";k.src="//www.vimeo.com/api/v2/video/"+w+".json?callback=lgJsonP"+s.el.getAttribute("lg-uid")+""+l;document.body.appendChild(k)}})(l)}utils.addClass(v[s.core.index],"active");utils.on(s.core.el,"onBeforeSlide.lgtm",function(){for(var k=0;k<v.length;k++){utils.removeClass(v[k],"active")}utils.addClass(v[s.core.index],"active")});for(var m=0;m<v.length;m++){(function(k){utils.on(v[k],"click.lg touchend.lg",function(){setTimeout(function(){if(s.thumbClickable&&!s.core.lgBusy||!s.core.doCss()){s.core.index=k;s.core.slide(s.core.index,false,true)}},50)})})(m)}utils.on(s.core.el,"onBeforeSlide.lgtm",function(){s.animateThumb(s.core.index)});utils.on(window,"resize.lgthumb orientationchange.lgthumb",function(){setTimeout(function(){s.animateThumb(s.core.index);s.thumbOuterWidth=s.thumbOuter.offsetWidth},200)})};j.prototype.setTranslate=function(k){utils.setVendor(this.core.outer.querySelector(".lg-thumb"),"Transform","translate3d(-"+k+"px, 0px, 0px)")};j.prototype.animateThumb=function(l){var m=this.core.outer.querySelector(".lg-thumb");if(this.core.s.animateThumb){var k;switch(this.core.s.currentPagerPosition){case"left":k=0;break;case"middle":k=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":k=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*l-1-k;if(this.left>this.thumbTotalWidth-this.thumbOuterWidth){this.left=this.thumbTotalWidth-this.thumbOuterWidth}if(this.left<0){this.left=0}if(this.core.lGalleryOn){if(!utils.hasClass(m,"on")){utils.setVendor(this.core.outer.querySelector(".lg-thumb"),"TransitionDuration",this.core.s.speed+"ms")}if(!this.core.doCss()){m.style.left=-this.left+"px"}}else{if(!this.core.doCss()){m.style.left=-this.left+"px"}}this.setTranslate(this.left)}};j.prototype.enableThumbDrag=function(){var p=this;var n=0;var l=0;var k=false;var m=false;var o=0;utils.addClass(p.thumbOuter,"lg-grab");utils.on(p.core.outer.querySelector(".lg-thumb"),"mousedown.lgthumb",function(q){if(p.thumbTotalWidth>p.thumbOuterWidth){q.preventDefault();n=q.pageX;k=true;p.core.outer.scrollLeft+=1;p.core.outer.scrollLeft-=1;p.thumbClickable=false;utils.removeClass(p.thumbOuter,"lg-grab");utils.addClass(p.thumbOuter,"lg-grabbing")}});utils.on(window,"mousemove.lgthumb",function(q){if(k){o=p.left;m=true;l=q.pageX;utils.addClass(p.thumbOuter,"lg-dragging");o=o-(l-n);if(o>p.thumbTotalWidth-p.thumbOuterWidth){o=p.thumbTotalWidth-p.thumbOuterWidth}if(o<0){o=0}p.setTranslate(o)}});utils.on(window,"mouseup.lgthumb",function(){if(m){m=false;utils.removeClass(p.thumbOuter,"lg-dragging");p.left=o;if(Math.abs(l-n)<p.core.s.swipeThreshold){p.thumbClickable=true}}else{p.thumbClickable=true}if(k){k=false;utils.removeClass(p.thumbOuter,"lg-grabbing");utils.addClass(p.thumbOuter,"lg-grab")}})};j.prototype.enableThumbSwipe=function(){var o=this;var m=0;var k=0;var l=false;var n=0;utils.on(o.core.outer.querySelector(".lg-thumb"),"touchstart.lg",function(p){if(o.thumbTotalWidth>o.thumbOuterWidth){p.preventDefault();m=p.targetTouches[0].pageX;o.thumbClickable=false}});utils.on(o.core.outer.querySelector(".lg-thumb"),"touchmove.lg",function(p){if(o.thumbTotalWidth>o.thumbOuterWidth){p.preventDefault();k=p.targetTouches[0].pageX;l=true;utils.addClass(o.thumbOuter,"lg-dragging");n=o.left;n=n-(k-m);if(n>o.thumbTotalWidth-o.thumbOuterWidth){n=o.thumbTotalWidth-o.thumbOuterWidth}if(n<0){n=0}o.setTranslate(n)}});utils.on(o.core.outer.querySelector(".lg-thumb"),"touchend.lg",function(){if(o.thumbTotalWidth>o.thumbOuterWidth){if(l){l=false;utils.removeClass(o.thumbOuter,"lg-dragging");if(Math.abs(k-m)<o.core.s.swipeThreshold){o.thumbClickable=true}o.left=n}else{o.thumbClickable=true}}else{o.thumbClickable=true}})};j.prototype.toggle=function(){var k=this;if(k.core.s.toggleThumb){utils.addClass(k.core.outer,"lg-can-toggle");k.thumbOuter.insertAdjacentHTML("beforeend",'<span class="lg-toggle-thumb lg-icon"></span>');utils.on(k.core.outer.querySelector(".lg-toggle-thumb"),"click.lg",function(){if(utils.hasClass(k.core.outer,"lg-thumb-open")){utils.removeClass(k.core.outer,"lg-thumb-open")}else{utils.addClass(k.core.outer,"lg-thumb-open")}})}};j.prototype.thumbkeyPress=function(){var k=this;utils.on(window,"keydown.lgthumb",function(l){if(l.keyCode===38){l.preventDefault();utils.addClass(k.core.outer,"lg-thumb-open")}else{if(l.keyCode===40){l.preventDefault();utils.removeClass(k.core.outer,"lg-thumb-open")}}})};j.prototype.destroy=function(){if(this.core.s.thumbnail&&this.core.items.length>1){utils.off(window,".lgthumb");this.thumbOuter.parentNode.removeChild(this.thumbOuter);utils.removeClass(this.core.outer,"lg-has-thumb");var k=document.getElementsByClassName("lg-script");while(k[0]){k[0].parentNode.removeChild(k[0])}}};window.lgModules.thumbnail=j})},{}]},{},[1])(1)});